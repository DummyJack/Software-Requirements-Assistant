openapi: 3.0.0
info:
  title: Local Models API
  version: 1.0.0

servers:
  - url: http://127.0.0.1:6000

tags:
  - name: default
  - name: model

paths:
  /health:
    get:
      summary: 健康檢查
      description: 檢查 Server 和 Ollama 服務健康狀態
      responses:
        '200':
          description: 健康檢查成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: healthy
                  ollama_connected:
                    type: boolean
                    example: true
                  available_models:
                    type: array
                    items:
                      type: string
                    example: ["mistral"]
                  models_count:
                    type: integer
                    example: 1
        '500':
          description: 健康檢查失敗
          content:
            text/plain:
              example: "健康檢查失敗"

  /api/v1/completion:
    post:
      tags:
        - model
      summary: 生成
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - prompt
                - model
              properties:
                prompt:
                  type: string
                  description: 提示詞
                  example: "什麼是人工智慧？"
                model:
                  type: string
                  description: 模型名稱
                  example: mistral
                temperature:
                  type: number
                  format: float
                  description: 溫度，範圍:1.0 ~ 2.0
                  default: 1.0
                  minimum: 0.0
                  maximum: 2.0
                max_tokens:
                  type: integer
                  description: Max token，null 為模型預設最大值
                  nullable: true
      responses:
        '200':
          description: 成功生成
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
                    description: AI 生成的回應內容
                    example: "人工智慧是一種讓電腦模擬人類智慧的技術..."
                  model:
                    type: string
                  created_at:
                    type: string
                    description: 生成完成的時間戳記（ISO 8601 格式）
                    example: "2025-12-02T16:53:26.123456Z"
                  done:
                    type: boolean
                    description: 是否完成生成
                    example: true
        '500':
          description: 生成失敗
          content:
            text/plain:
              example: "生成失敗"
