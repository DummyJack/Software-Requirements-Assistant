---
alwaysApply: true
---

# 專案開發規則

## 結構
```
model_api/
├── main.py              # 主程式入口
├── routes/              
│   ├── __init__.py      # 路由管理器
│   └── model.py         # 模型相關路由
├── swagger.yml          # API 文檔
├── logs/
│   └── api.log          # API 日誌
├── requirements.txt     # packages
├── test_api.ps1         # test script
├── .gitignore          
└── model_venv/          # 虛擬環境
```

## 開發規則

### 全域
- 手動調整後的檔案，除非會造成錯誤，否則不需要調整
- 不要使用簡體中文
- 先檢查有沒有啟動 Server

### 程式架構
- main.py：只放全域設定、中間件、異常處理
- routes/：所有路由邏輯放在此資料夾
- 不創建多餘的 markdown 文件，需要時再寫

### 程式碼風格
- 使用中文註釋
- 詳細說明用 """ """ 三引號
- 清晰的變數命名
- 適當的空行分隔邏輯區塊

### Import 規則
- 只 import 實際使用的套件
- 不 import 未來可能用到但現在沒用的
- import 套件統一寫在檔案開頭
- import 寫在一起(位置於 from ... import 前面)、from ... import 寫在一起

### API 設計
- 使用 RESTful API 設計風格
- Port: 6000
- 統一前綴：/api/v1

### 錯誤處理與防護
- 每個端點都要有 try-except
- 記錄所有錯誤到 log
- HTTPException 用於業務邏輯錯誤
- 安全標頭中間件：X-Content-Type-Options, X-Frame-Options, X-XSS-Protection, HSTS

### 啟動與測試
- 啟動：python main.py
- 測試：執行 test_api.ps1